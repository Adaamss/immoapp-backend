<div class="container mt-4">
  <h2 class="mb-4 text-primary">Scraped Annonces</h2>

  <div *ngIf="loading" class="alert alert-info">Loading…</div>
  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

  <table *ngIf="!loading && !error" class="table table-striped table-bordered table-hover">
    <thead class="table-dark">
      <tr>
        <th>Title</th>
        <th>Location</th>
        <th>Surface (m²)</th>
        <th>Price</th>
        <th>Estimated Price</th>
        <th>Link</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let a of paginatedAnnonces">
        <td>{{ a.title }}</td>
        <td>{{ a.location }}</td>
        <td>{{ a.surface }}</td>
        <td>{{ a.price | number:'1.0-0' }} DT</td>
        <td>{{ a.estimatedPrice | number:'1.0-0' }} DT</td>
        <td>
          <a [href]="a.url" target="_blank" class="btn btn-sm btn-outline-primary">View</a>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Pagination controls -->
  <nav *ngIf="!loading && !error && totalPages > 1" aria-label="Page navigation">
    <ul class="pagination justify-content-center">
      <li class="page-item" [class.disabled]="currentPage === 1">
        <button class="page-link" (click)="changePage(currentPage - 1)">Previous</button>
      </li>

      <li
        class="page-item"
        *ngFor="let page of [].constructor(totalPages); let i = index"
        [class.active]="currentPage === i + 1"
      >
        <button class="page-link" (click)="changePage(i + 1)">
          {{ i + 1 }}
        </button>
      </li>

      <li class="page-item" [class.disabled]="currentPage === totalPages">
        <button class="page-link" (click)="changePage(currentPage + 1)">Next</button>
      </li>
    </ul>
  </nav>
</div>
